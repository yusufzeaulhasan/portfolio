<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Two-Stage CMOS Operational Amplifier | Yusuf Hasan</title>
  <link rel="stylesheet" href="../assets/style.css" />

  <!-- Page-local styles for the performance table -->
  <style>
    .perf-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      border: 1px solid var(--line);
      border-radius: 12px;
      overflow: hidden;
    }
    .perf-table th, .perf-table td {
      padding: 10px 12px;
      border-bottom: 1px solid var(--line);
      text-align: left;
      vertical-align: top;
      font-size: 14px;
    }
    .perf-table th {
      background: rgba(255,255,255,0.03);
      color: var(--text);
      font-weight: 700;
    }
    .perf-table td {
      color: var(--text);
    }
    .perf-table tr:last-child td { border-bottom: none; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    .note {
      color: var(--muted);
      font-size: 13px;
      margin-top: 10px;
    }
  </style>
</head>

<body>
  <header class="site-header">
    <div class="container">
      <div class="topbar">
        <div>
          <h1>Two-Stage CMOS Operational Amplifier</h1>
          <p class="subtitle">
            45 nm CMOS • fully differential first stage • CMFB • stability-verified
          </p>
        </div>
        <nav class="nav">
          <a href="../index.html#projects">← Back</a>
          <a href="../index.html#contact">Contact</a>
        </nav>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="section">

      <!-- OVERVIEW -->
      <div class="card">
        <h3>Overview</h3>
        <p>
          Designed and simulated a two-stage CMOS operational amplifier in a 45 nm process using Cadence Virtuoso.
          The design targets high open-loop gain, wide unity-gain bandwidth, and stable closed-loop operation.
          The amplifier consists of a fully differential first stage with common-mode feedback (CMFB), followed by
          a single-ended second stage.
        </p>
        <p>
          Performance was validated using DC operating point analysis, open- and closed-loop frequency response,
          and large-signal transient simulations.
        </p>
      </div>

      <!-- TOPOLOGY -->
      <div class="card">
        <h3>Overall Topology</h3>
        <p>
          The amplifier follows a two-stage topology. The fully differential first stage provides high gain and
          common-mode rejection. A dedicated CMFB loop regulates the output common-mode voltage. The second stage
          is a common-source amplifier that increases output swing and improves load driving capability.
        </p>

        <img
          src="images/OPAMP_topology.png"
          alt="Overall two-stage CMOS op-amp topology"
          class="evidence-image"
        >

        <p>
          This structure is widely used for high-speed, low-power operational amplifiers because it can achieve
          strong gain-bandwidth tradeoffs while remaining stable at unity gain with proper compensation.
        </p>
      </div>

      <!-- CIRCUIT IMPLEMENTATION -->
      <div class="card">
        <h3>Circuit Implementation</h3>
        <p>
          The complete transistor-level schematic was implemented in Cadence Virtuoso using low-voltage threshold
          devices. Device sizing and bias currents were chosen to meet small-signal targets (gain, bandwidth, and
          phase margin) while maintaining correct operating regions across the amplifier core and the CMFB network.
        </p>

        <img
          src="images/image.png"
          alt="Two-stage CMOS op-amp schematic"
          class="evidence-image"
        >
      </div>

      <!-- BIASING -->
      <div class="card">
        <h3>Biasing and DC Operating Points</h3>
        <p>
          DC operating point simulations were used to verify that transistors operate in the intended region and
          that the CMFB loop establishes the desired output common-mode level. Correct biasing is essential for
          predictable small-signal behavior and robust closed-loop stability.
        </p>

        <div class="evidence-grid">
          <img
            src="images/DC_Operating_points_OPAMP.png"
            alt="DC operating points of op-amp core"
          >
          <img
            src="images/DC_operating_points_CMFB.png"
            alt="DC operating points of CMFB circuit"
          >
        </div>

        <p>
          Extracted small-signal parameters (e.g., transconductance and output resistance) were reviewed to confirm
          consistency with the intended operating point and to support hand-checks of gain and pole locations.
        </p>

        <div class="evidence-grid">
          <img
            src="images/OPAMP_Component_Parameters.png"
            alt="Op-amp device parameters"
          >
          <img
            src="images/CMFB_Component_Parameters.png"
            alt="CMFB device parameters"
          >
        </div>
      </div>

      <!-- AC ANALYSIS -->
      <div class="card">
        <h3>Small-Signal Frequency Response</h3>
        <p>
          Small-signal AC simulations were performed to evaluate open-loop gain, unity-gain bandwidth, and phase
          margin. The open-loop response confirms the gain roll-off and phase behavior, while the closed-loop
          configuration verifies stable unity-gain operation.
        </p>

        <p><strong>Open-Loop Gain and Phase:</strong></p>
        <img
          src="images/Open_loop_Gain_Phase.png"
          alt="Open-loop gain and phase response"
          class="evidence-image"
        >

        <p><strong>Closed-Loop Frequency Response:</strong></p>
        <img
          src="images/Closed_Loop_Bode_Plot.png"
          alt="Closed-loop Bode plot"
          class="evidence-image"
        >
      </div>

      <!-- ACHIEVED PERFORMANCE (HTML TABLE) -->
      <div class="card">
        <h3>Achieved Performance</h3>
        <p>
          Summary of achieved performance from DC, AC, and transient simulations for the final tuned design.
        </p>

        <table class="perf-table">
          <thead>
            <tr>
              <th>Parameter</th>
              <th class="mono">Symbol</th>
              <th>Achieved</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Output Common-Mode</td>
              <td class="mono">V<sub>CM</sub></td>
              <td>0.4997 V</td>
            </tr>
            <tr>
              <td>Total Power</td>
              <td class="mono">P</td>
              <td>0.39641 mW</td>
            </tr>
            <tr>
              <td>CMFB Power</td>
              <td class="mono">P<sub>CMFB</sub></td>
              <td>12.278 µW</td>
            </tr>
            <tr>
              <td>Differential Output Swing</td>
              <td class="mono">V<sub>out,diff</sub></td>
              <td>0.5 V</td>
            </tr>
            <tr>
              <td>Low-Frequency Gain</td>
              <td class="mono">A<sub>0</sub></td>
              <td>47.5097 dB</td>
            </tr>
            <tr>
              <td>Unity-Gain Frequency</td>
              <td class="mono">f<sub>u</sub></td>
              <td>616.613 MHz</td>
            </tr>
            <tr>
              <td>Phase Margin</td>
              <td class="mono">PM</td>
              <td>≈ 61.143°</td>
            </tr>
            <tr>
              <td>Slew Rate</td>
              <td class="mono">SR</td>
              <td>28.79 V/µs</td>
            </tr>
          </tbody>
        </table>

        <p class="note">
          Note: Values are reported from simulation results and depend on the testbench configuration
          (loading, feedback connection, input stimulus) and process assumptions.
        </p>
      </div>

      <!-- TRANSIENT -->
      <div class="card">
        <h3>Transient and Large-Signal Performance</h3>
        <p>
          Large-signal transient simulations were used to evaluate dynamic behavior including slew response and
          settling characteristics. The response indicates stable behavior without sustained oscillation when
          subjected to step-like inputs.
        </p>

        <img
          src="images/Large_Signal0_1V.png"
          alt="Large-signal transient response"
          class="evidence-image"
        >
      </div>

      <!-- SUMMARY -->
      <div class="card">
        <h3>Summary</h3>
        <ul class="bullets">
          <li>Designed a two-stage CMOS operational amplifier in a 45 nm process</li>
          <li>Implemented a fully differential first stage with dedicated CMFB regulation</li>
          <li>Verified operating regions via DC analysis and extracted device parameters</li>
          <li>Demonstrated stable unity-gain operation with wide bandwidth and solid phase margin</li>
          <li>Validated large-signal behavior through transient simulation</li>
        </ul>
      </div>

    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <p>© <span id="year"></span> Yusuf Hasan</p>
    </div>
  </footer>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
